\hypertarget{wfg_8hpp_source}{}\doxysection{wfg.\+hpp}
\label{wfg_8hpp_source}\index{/home/pedro/Documents/projects/anytime-\/pmnk-\/landscapes/src/Utils/wfg.hpp@{/home/pedro/Documents/projects/anytime-\/pmnk-\/landscapes/src/Utils/wfg.hpp}}
\mbox{\hyperlink{wfg_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{9 \textcolor{preprocessor}{\#ifndef WFG\_H}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#define WFG\_H}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <algorithm>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <array>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <limits>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <type\_traits>}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{17 }
\DoxyCodeLine{18 \textcolor{comment}{// This code assumes maximizing objective functions}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{keyword}{namespace }pmnk \{}
\DoxyCodeLine{21 }
\DoxyCodeLine{31 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{32 \textcolor{keyword}{auto} \mbox{\hyperlink{wfg_8hpp_a7b81975c627cca82a36360252187f14a}{weakly\_dominates}}(T \textcolor{keyword}{const}\& lhs, T \textcolor{keyword}{const}\& rhs) \{}
\DoxyCodeLine{33   \textcolor{keywordflow}{for} (\textcolor{keyword}{decltype}(lhs.size()) i = 0; i < lhs.size(); ++i) \{}
\DoxyCodeLine{34     \textcolor{keywordflow}{if} (lhs[i] < rhs[i]) \{}
\DoxyCodeLine{35       \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{36     \}}
\DoxyCodeLine{37   \}}
\DoxyCodeLine{38   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{39 \}}
\DoxyCodeLine{40 }
\DoxyCodeLine{49 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{50 \textcolor{keywordtype}{void} \mbox{\hyperlink{wfg_8hpp_a97e1efebc59985cb58fdf94cf847655a}{insert\_non\_dominated}}(T\&\& sol, std::vector<T>\& set) \{}
\DoxyCodeLine{51   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it = set.begin(); it != set.end(); ++it) \{}
\DoxyCodeLine{52     \textcolor{keywordflow}{if} (\mbox{\hyperlink{wfg_8hpp_a7b81975c627cca82a36360252187f14a}{weakly\_dominates}}(*it, sol)) \{}
\DoxyCodeLine{53       \textcolor{keywordflow}{return};}
\DoxyCodeLine{54     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{wfg_8hpp_a7b81975c627cca82a36360252187f14a}{weakly\_dominates}}(sol, *it)) \{}
\DoxyCodeLine{55       *it = std::move(set.back());}
\DoxyCodeLine{56       set.pop\_back();}
\DoxyCodeLine{57       set.erase(}
\DoxyCodeLine{58           std::remove\_if(it, set.end(), [\&sol](\textcolor{keyword}{auto} \textcolor{keyword}{const}\& s) \{ return weakly\_dominates(sol, s); \}),}
\DoxyCodeLine{59           set.end());}
\DoxyCodeLine{60       \textcolor{keywordflow}{break};}
\DoxyCodeLine{61     \}}
\DoxyCodeLine{62   \}}
\DoxyCodeLine{63   set.push\_back(std::move(sol));}
\DoxyCodeLine{64 \}}
\DoxyCodeLine{65 }
\DoxyCodeLine{78 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Iter, \textcolor{keyword}{typename} T>}
\DoxyCodeLine{79 \textcolor{keyword}{auto} \mbox{\hyperlink{wfg_8hpp_a1d7cb896483ca8ce1d61bf797c4a13a0}{limit\_set}}(Iter begin, Iter end, T \textcolor{keyword}{const}\& sol) \{}
\DoxyCodeLine{80   std::vector<T> res;}
\DoxyCodeLine{81   res.reserve(\textcolor{keyword}{static\_cast<}typename std::vector<T>::size\_type\textcolor{keyword}{>}(std::distance(begin, end)));}
\DoxyCodeLine{82   \textcolor{keywordflow}{for} (; begin != end; ++begin) \{}
\DoxyCodeLine{83     \textcolor{keyword}{auto} aux = *begin;}
\DoxyCodeLine{84     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < sol.size(); ++i) \{}
\DoxyCodeLine{85       aux[i] = std::min(aux[i], sol[i]);}
\DoxyCodeLine{86     \}}
\DoxyCodeLine{87     \mbox{\hyperlink{wfg_8hpp_a97e1efebc59985cb58fdf94cf847655a}{insert\_non\_dominated}}(std::move(aux), res);}
\DoxyCodeLine{88   \}}
\DoxyCodeLine{89   \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{90 \}}
\DoxyCodeLine{91 }
\DoxyCodeLine{101 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} R>}
\DoxyCodeLine{102 \textcolor{keyword}{auto} \mbox{\hyperlink{wfg_8hpp_a152f9414469f374f069737088eaf729e}{point\_hv}}(T \textcolor{keyword}{const}\& p, R \textcolor{keyword}{const}\& r) \{}
\DoxyCodeLine{103   \textcolor{keyword}{auto} res = p[0] -\/ r[0];}
\DoxyCodeLine{104   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 1; i < p.size(); ++i) \{}
\DoxyCodeLine{105     res *= p[i] -\/ r[i];}
\DoxyCodeLine{106   \}}
\DoxyCodeLine{107   \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{108 \}}
\DoxyCodeLine{109 }
\DoxyCodeLine{121 \textcolor{keyword}{template} <\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T>}
\DoxyCodeLine{122 std::common\_type\_t<typename S::value\_type::value\_type, typename T::value\_type> \mbox{\hyperlink{wfg_8hpp_ac021811f6098ee6dc31631bc691a2599}{set\_hv\_wfg}}(}
\DoxyCodeLine{123     S \textcolor{keyword}{const}\& s, T \textcolor{keyword}{const}\& ref) \{}
\DoxyCodeLine{124   \textcolor{keyword}{using} result\_t = std::common\_type\_t<typename S::value\_type::value\_type, typename T::value\_type>;}
\DoxyCodeLine{125   \textcolor{keyword}{auto} res = result\_t(0);}
\DoxyCodeLine{126   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} it = s.begin(); it != s.end(); ++it) \{}
\DoxyCodeLine{127     res += \mbox{\hyperlink{wfg_8hpp_a152f9414469f374f069737088eaf729e}{point\_hv}}(*it, ref) -\/ \mbox{\hyperlink{wfg_8hpp_ac021811f6098ee6dc31631bc691a2599}{set\_hv\_wfg}}(\mbox{\hyperlink{wfg_8hpp_a1d7cb896483ca8ce1d61bf797c4a13a0}{limit\_set}}(std::next(it), s.end(), *it), ref);}
\DoxyCodeLine{128   \}}
\DoxyCodeLine{129   \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{130 \}}
\DoxyCodeLine{131 }
\DoxyCodeLine{143 \textcolor{keyword}{template} <\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T>}
\DoxyCodeLine{144 \textcolor{keyword}{auto} \mbox{\hyperlink{wfg_8hpp_a785926e7f8db52da4427d0334fc6e694}{set\_hv}}(S \textcolor{keyword}{const}\& s, T \textcolor{keyword}{const}\& ref) \{}
\DoxyCodeLine{145   std::vector<T> v;}
\DoxyCodeLine{146   v.reserve(s.size());}
\DoxyCodeLine{147   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const}\& sol : s) \{}
\DoxyCodeLine{148     v.push\_back(sol.objective\_vector());}
\DoxyCodeLine{149   \}}
\DoxyCodeLine{150   sort(v.begin(), v.end(), [](\textcolor{keyword}{auto} \textcolor{keyword}{const}\& a, \textcolor{keyword}{auto} \textcolor{keyword}{const}\& b) \{ return a[0] < b[0]; \});}
\DoxyCodeLine{151   \textcolor{keywordflow}{return} \mbox{\hyperlink{wfg_8hpp_ac021811f6098ee6dc31631bc691a2599}{set\_hv\_wfg}}(v, ref);}
\DoxyCodeLine{152 \}}
\DoxyCodeLine{153 }
\DoxyCodeLine{165 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T, \textcolor{keyword}{typename} S, \textcolor{keyword}{typename} R>}
\DoxyCodeLine{166 \textcolor{keyword}{auto} \mbox{\hyperlink{wfg_8hpp_a74f776ddb26dd53ce994d6aa65d4b961}{point\_hvc}}(T \textcolor{keyword}{const}\& p, S \textcolor{keyword}{const}\& s, R \textcolor{keyword}{const}\& ref) \{}
\DoxyCodeLine{167   std::vector<T> v;}
\DoxyCodeLine{168   v.reserve(s.size());}
\DoxyCodeLine{169   \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const}\& sol : s) \{}
\DoxyCodeLine{170     v.push\_back(sol.objective\_vector());}
\DoxyCodeLine{171   \}}
\DoxyCodeLine{172   sort(v.begin(), v.end(), [](\textcolor{keyword}{auto} \textcolor{keyword}{const}\& a, \textcolor{keyword}{auto} \textcolor{keyword}{const}\& b) \{ return a[0] < b[0]; \});}
\DoxyCodeLine{173   \textcolor{keywordflow}{return} \mbox{\hyperlink{wfg_8hpp_a152f9414469f374f069737088eaf729e}{point\_hv}}(p, ref) -\/ \mbox{\hyperlink{wfg_8hpp_ac021811f6098ee6dc31631bc691a2599}{set\_hv\_wfg}}(\mbox{\hyperlink{wfg_8hpp_a1d7cb896483ca8ce1d61bf797c4a13a0}{limit\_set}}(v.begin(), v.end(), p), ref);}
\DoxyCodeLine{174 \}}
\DoxyCodeLine{175 }
\DoxyCodeLine{177 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{178 \textcolor{keyword}{class }[[nodiscard]] \mbox{\hyperlink{classpmnk_1_1hvobj}{hvobj}} \{}
\DoxyCodeLine{179  \textcolor{keyword}{public}:}
\DoxyCodeLine{180   \textcolor{keyword}{using} hv\_type = T;}
\DoxyCodeLine{181   \textcolor{keyword}{using} ovec\_type = std::vector<hv\_type>;}
\DoxyCodeLine{182   \textcolor{keyword}{using} set\_type = std::vector<ovec\_type>;}
\DoxyCodeLine{183 }
\DoxyCodeLine{184   \textcolor{keyword}{constexpr} \textcolor{keyword}{explicit} \mbox{\hyperlink{classpmnk_1_1hvobj}{hvobj}}(ovec\_type \textcolor{keyword}{const}\& r)}
\DoxyCodeLine{185       : m\_hv(0)}
\DoxyCodeLine{186       , m\_set()}
\DoxyCodeLine{187       , m\_ref(r) \{\}}
\DoxyCodeLine{188 }
\DoxyCodeLine{189   \textcolor{keyword}{constexpr} \mbox{\hyperlink{classpmnk_1_1hvobj}{hvobj}}(\mbox{\hyperlink{classpmnk_1_1hvobj}{hvobj}} \textcolor{keyword}{const}\& other) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{190   \textcolor{keyword}{constexpr} \mbox{\hyperlink{classpmnk_1_1hvobj}{hvobj}}(\mbox{\hyperlink{classpmnk_1_1hvobj}{hvobj}}\&\& other) \textcolor{keyword}{noexcept} = \textcolor{keywordflow}{default};}
\DoxyCodeLine{191 }
\DoxyCodeLine{193   [[nodiscard]] \textcolor{keyword}{constexpr} \textcolor{keyword}{auto} \mbox{\hyperlink{classpmnk_1_1hvobj_a68f3f8436be85ff83cdf7b1d99433726}{value}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{194     \textcolor{keywordflow}{return} m\_hv;}
\DoxyCodeLine{195   \}}
\DoxyCodeLine{196 }
\DoxyCodeLine{198   \textcolor{keyword}{template} <\textcolor{keyword}{typename} V>}
\DoxyCodeLine{199   [[nodiscard]] \textcolor{keyword}{constexpr} \textcolor{keyword}{auto} \mbox{\hyperlink{classpmnk_1_1hvobj_a4350417e4a01443561495173b984a88b}{contribution}}(V \textcolor{keyword}{const}\& v)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{200     \textcolor{keywordflow}{return} m\_point\_hv(v, m\_ref) -\/ m\_set\_hv(m\_limit\_set(m\_set, v), m\_ref);}
\DoxyCodeLine{201   \}}
\DoxyCodeLine{202 }
\DoxyCodeLine{204   \textcolor{keyword}{template} <\textcolor{keyword}{typename} V>}
\DoxyCodeLine{205   \textcolor{keyword}{constexpr} \textcolor{keyword}{auto} \mbox{\hyperlink{classpmnk_1_1hvobj_a0770fbe039385ae346c5048fda3c89c2}{insert}}(V\&\& v) \{}
\DoxyCodeLine{206     \textcolor{keyword}{auto} hvc = contribution(v);}
\DoxyCodeLine{207     \textcolor{keywordflow}{if} (hvc != 0) \{}
\DoxyCodeLine{208       m\_insert\_non\_dominated(std::forward<V>(v), m\_set);}
\DoxyCodeLine{209       m\_hv += hvc;}
\DoxyCodeLine{210     \}}
\DoxyCodeLine{211     \textcolor{keywordflow}{return} hvc;}
\DoxyCodeLine{212   \}}
\DoxyCodeLine{213 }
\DoxyCodeLine{216   \textcolor{keyword}{template} <\textcolor{keyword}{typename} V>}
\DoxyCodeLine{217   \textcolor{keyword}{constexpr} \textcolor{keyword}{auto} \mbox{\hyperlink{classpmnk_1_1hvobj_a4937050c270923aa1bfe7caa952d37e7}{remove}}(V \textcolor{keyword}{const}\& v) \{}
\DoxyCodeLine{218     \textcolor{keyword}{auto} it = std::find(m\_set.begin(), m\_set.end(), v);}
\DoxyCodeLine{219     \textcolor{keywordflow}{if} (it == m\_set.end())}
\DoxyCodeLine{220       \textcolor{keywordflow}{return} -\/1.0;}
\DoxyCodeLine{221     m\_set.erase(it);}
\DoxyCodeLine{222     \textcolor{keyword}{auto} hvc = contribution(v);}
\DoxyCodeLine{223     m\_hv -\/= hvc;}
\DoxyCodeLine{224     \textcolor{keywordflow}{return} hvc;}
\DoxyCodeLine{225   \}}
\DoxyCodeLine{226 }
\DoxyCodeLine{227  \textcolor{keyword}{private}:}
\DoxyCodeLine{229   \textcolor{keyword}{template} <\textcolor{keyword}{typename} V>}
\DoxyCodeLine{230   [[nodiscard]] \textcolor{keyword}{constexpr} \textcolor{keyword}{auto} m\_weakly\_dominates(V \textcolor{keyword}{const}\& a, V \textcolor{keyword}{const}\& b)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{231     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 1; i < a.size(); ++i) \{}
\DoxyCodeLine{232       \textcolor{keywordflow}{if} (a[i] < b[i]) \{}
\DoxyCodeLine{233         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{234       \}}
\DoxyCodeLine{235     \}}
\DoxyCodeLine{236     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{237   \}}
\DoxyCodeLine{238 }
\DoxyCodeLine{240   \textcolor{keyword}{template} <\textcolor{keyword}{typename} V, \textcolor{keyword}{typename} C>}
\DoxyCodeLine{241   \textcolor{keywordtype}{void} m\_insert\_non\_dominated(V\&\& v, C\& set)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{242     \textcolor{keyword}{auto} it = set.begin();}
\DoxyCodeLine{243 }
\DoxyCodeLine{244     \textcolor{keywordflow}{for} (; it != set.end() \&\& (*it)[0] > v[0]; ++it) \{}
\DoxyCodeLine{245       \textcolor{keywordflow}{if} (m\_weakly\_dominates(*it, v)) \{}
\DoxyCodeLine{246         \textcolor{keywordflow}{return};}
\DoxyCodeLine{247       \}}
\DoxyCodeLine{248     \}}
\DoxyCodeLine{249 }
\DoxyCodeLine{250     \textcolor{keywordflow}{for} (; it != set.end() \&\& (*it)[0] == v[0]; ++it) \{}
\DoxyCodeLine{251       \textcolor{keywordflow}{if} (m\_weakly\_dominates(*it, v)) \{}
\DoxyCodeLine{252         \textcolor{keywordflow}{return};}
\DoxyCodeLine{253       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m\_weakly\_dominates(v, *it)) \{}
\DoxyCodeLine{254         *it = std::forward<V>(v);}
\DoxyCodeLine{255         set.erase(std::remove\_if(std::next(it), set.end(),}
\DoxyCodeLine{256                                  [\textcolor{keyword}{this}, it](\textcolor{keyword}{auto} \textcolor{keyword}{const}\& a) \{ return m\_weakly\_dominates(*it, a); \}),}
\DoxyCodeLine{257                   set.end());}
\DoxyCodeLine{258         \textcolor{keywordflow}{return};}
\DoxyCodeLine{259       \}}
\DoxyCodeLine{260     \}}
\DoxyCodeLine{261 }
\DoxyCodeLine{262     \textcolor{keywordflow}{if} (it == set.end()) \{}
\DoxyCodeLine{263       set.push\_back(std::forward<V>(v));}
\DoxyCodeLine{264     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{265       \textcolor{keyword}{auto} aux = std::forward<V>(v);}
\DoxyCodeLine{266       std::swap(aux, *it);}
\DoxyCodeLine{267       \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} jt = std::next(it); jt != set.end(); ++jt) \{}
\DoxyCodeLine{268         \textcolor{keywordflow}{if} (m\_weakly\_dominates(*it, aux)) \{}
\DoxyCodeLine{269           set.erase(}
\DoxyCodeLine{270               std::remove\_if(jt, set.end(),}
\DoxyCodeLine{271                              [\textcolor{keyword}{this}, it](\textcolor{keyword}{auto} \textcolor{keyword}{const}\& a) \{ return m\_weakly\_dominates(*it, a); \}),}
\DoxyCodeLine{272               set.end());}
\DoxyCodeLine{273           \textcolor{keywordflow}{return};}
\DoxyCodeLine{274         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{275           std::swap(aux, *jt);}
\DoxyCodeLine{276         \}}
\DoxyCodeLine{277       \}}
\DoxyCodeLine{278       \textcolor{keywordflow}{if} (!m\_weakly\_dominates(*it, aux)) \{}
\DoxyCodeLine{279         set.push\_back(std::move(aux));}
\DoxyCodeLine{280       \}}
\DoxyCodeLine{281     \}}
\DoxyCodeLine{282   \}}
\DoxyCodeLine{283 }
\DoxyCodeLine{284   \textcolor{comment}{// limit\_set (implementation)}}
\DoxyCodeLine{285   \textcolor{keyword}{template} <\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} V>}
\DoxyCodeLine{286   \textcolor{keyword}{auto} m\_limit\_set(S \textcolor{keyword}{const}\& s, V \textcolor{keyword}{const}\& v)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{287     S res;}
\DoxyCodeLine{288     res.reserve(s.size());}
\DoxyCodeLine{289     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const}\& p : s) \{}
\DoxyCodeLine{290       \textcolor{keyword}{auto} aux = p;}
\DoxyCodeLine{291       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < aux.size(); ++i) \{}
\DoxyCodeLine{292         aux[i] = std::min(aux[i], v[i]);}
\DoxyCodeLine{293       \}}
\DoxyCodeLine{294       m\_insert\_non\_dominated(std::move(aux), res);}
\DoxyCodeLine{295     \}}
\DoxyCodeLine{296     \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{297   \}}
\DoxyCodeLine{298 }
\DoxyCodeLine{300   \textcolor{keyword}{template} <\textcolor{keyword}{typename} V, \textcolor{keyword}{typename} R>}
\DoxyCodeLine{301   \textcolor{keyword}{auto} m\_point\_hv(V \textcolor{keyword}{const}\& v, R \textcolor{keyword}{const}\& r)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{302     \textcolor{keyword}{auto} res = v[0] -\/ r[0];}
\DoxyCodeLine{303     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 1; i < v.size(); ++i) \{}
\DoxyCodeLine{304       res *= v[i] -\/ r[i];}
\DoxyCodeLine{305     \}}
\DoxyCodeLine{306     \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{307   \}}
\DoxyCodeLine{308 }
\DoxyCodeLine{310   \textcolor{keyword}{template} <\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} R>}
\DoxyCodeLine{311   \textcolor{keyword}{auto} m\_set\_hv3d(S \textcolor{keyword}{const}\& s, R \textcolor{keyword}{const}\& r)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{312     \textcolor{keyword}{using} array2\_t = std::array<hv\_type, 2>;}
\DoxyCodeLine{313 }
\DoxyCodeLine{314     \textcolor{keyword}{auto} aux = std::vector<array2\_t>\{\{r[1], std::numeric\_limits<hv\_type>::max()\},}
\DoxyCodeLine{315                                      \{std::numeric\_limits<hv\_type>::max(), r[2]\}\};}
\DoxyCodeLine{316 }
\DoxyCodeLine{317     hv\_type v = 0;}
\DoxyCodeLine{318     hv\_type a = 0;}
\DoxyCodeLine{319     hv\_type z = 0;}
\DoxyCodeLine{320 }
\DoxyCodeLine{321     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const}\& p : s) \{}
\DoxyCodeLine{322       v += a * (z -\/ p[0]);}
\DoxyCodeLine{323       z = p[0];}
\DoxyCodeLine{324 }
\DoxyCodeLine{325       \textcolor{keyword}{auto} tmp = array2\_t\{p[1], p[2]\};}
\DoxyCodeLine{326       \textcolor{keyword}{auto} it = std::lower\_bound(aux.begin(), aux.end(), tmp,}
\DoxyCodeLine{327                                  [](\textcolor{keyword}{auto} \textcolor{keyword}{const}\& a, \textcolor{keyword}{auto} \textcolor{keyword}{const}\& b) \{ return a[1] > b[1]; \});}
\DoxyCodeLine{328       \textcolor{keyword}{auto} jt = it;}
\DoxyCodeLine{329 }
\DoxyCodeLine{330       \textcolor{keyword}{auto} r0 = (*std::prev(it))[0];}
\DoxyCodeLine{331       \textcolor{keyword}{auto} r1 = tmp[1];}
\DoxyCodeLine{332       \textcolor{keywordflow}{for} (; (*it)[0] <= tmp[0]; ++it) \{}
\DoxyCodeLine{333         a += (tmp[0] -\/ r0) * (r1 -\/ (*it)[1]);}
\DoxyCodeLine{334         r0 = (*it)[0];}
\DoxyCodeLine{335         r1 = (*it)[1];}
\DoxyCodeLine{336       \}}
\DoxyCodeLine{337       a += (tmp[0] -\/ r0) * (r1 -\/ (*it)[1]);}
\DoxyCodeLine{338       \textcolor{keywordflow}{if} (jt != it) \{}
\DoxyCodeLine{339         *jt = tmp;}
\DoxyCodeLine{340         aux.erase(++jt, it);}
\DoxyCodeLine{341       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{342         aux.insert(it, tmp);}
\DoxyCodeLine{343       \}}
\DoxyCodeLine{344     \}}
\DoxyCodeLine{345     v += a * (z -\/ r[0]);}
\DoxyCodeLine{346     \textcolor{keywordflow}{return} v;}
\DoxyCodeLine{347   \}}
\DoxyCodeLine{348 }
\DoxyCodeLine{350   \textcolor{keyword}{template} <\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} R>}
\DoxyCodeLine{351   \textcolor{keyword}{auto} m\_set\_hv(S \textcolor{keyword}{const}\& s, R \textcolor{keyword}{const}\& r, hv\_type c = 1) const -\/> hv\_type \{}
\DoxyCodeLine{352     hv\_type v = 0;}
\DoxyCodeLine{353 }
\DoxyCodeLine{354     \textcolor{keywordflow}{if} (s.size() == 0) \{}
\DoxyCodeLine{355       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{356     \}}
\DoxyCodeLine{357 }
\DoxyCodeLine{358     \textcolor{keywordflow}{if} (s.begin()-\/>size() == 2) \{}
\DoxyCodeLine{359       hv\_type r1 = r[1];}
\DoxyCodeLine{360       \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const}\& p : s) \{}
\DoxyCodeLine{361         v += (p[1] -\/ r1) * (p[0] -\/ r[0]);}
\DoxyCodeLine{362         r1 = p[1];}
\DoxyCodeLine{363       \}}
\DoxyCodeLine{364       v *= c;}
\DoxyCodeLine{365     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (s.begin()-\/>size() == 3) \{}
\DoxyCodeLine{366       v = c * m\_set\_hv3d(s, r);}
\DoxyCodeLine{367     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{368       \textcolor{keyword}{auto} newr = std::vector<hv\_type>();}
\DoxyCodeLine{369       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 1; i < r.size(); ++i) \{}
\DoxyCodeLine{370         newr.push\_back(r[i]);}
\DoxyCodeLine{371       \}}
\DoxyCodeLine{372       \textcolor{keyword}{auto} newl = std::vector<std::vector<hv\_type>>();}
\DoxyCodeLine{373       newl.reserve(s.size());}
\DoxyCodeLine{374       \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \textcolor{keyword}{const}\& p : s) \{}
\DoxyCodeLine{375         \textcolor{keyword}{auto} newc = c * (p[0] -\/ r[0]);}
\DoxyCodeLine{376         \textcolor{keyword}{auto} newp = std::vector<hv\_type>();}
\DoxyCodeLine{377         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 1; i < p.size(); ++i) \{}
\DoxyCodeLine{378           newp.push\_back(p[i]);}
\DoxyCodeLine{379         \}}
\DoxyCodeLine{380 }
\DoxyCodeLine{381         v += newc * m\_point\_hv(newp, newr) -\/ m\_set\_hv(m\_limit\_set(newl, newp), newr, newc);}
\DoxyCodeLine{382 }
\DoxyCodeLine{383         m\_insert\_non\_dominated(std::move(newp), newl);}
\DoxyCodeLine{384       \}}
\DoxyCodeLine{385     \}}
\DoxyCodeLine{386     \textcolor{keywordflow}{return} v;}
\DoxyCodeLine{387   \}}
\DoxyCodeLine{388 }
\DoxyCodeLine{389   hv\_type m\_hv;}
\DoxyCodeLine{390   set\_type m\_set;}
\DoxyCodeLine{391   ovec\_type m\_ref;}
\DoxyCodeLine{392 \};}
\DoxyCodeLine{393 }
\DoxyCodeLine{394 \}  \textcolor{comment}{// namespace pmnk}}
\DoxyCodeLine{395 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// WFG\_H}}

\end{DoxyCode}
